<div class="concepts-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">
        <mat-icon class="title-icon">event_note</mat-icon>
        My Concepts
      </h1>
      <button mat-raised-button color="primary" (click)="createConcept()" class="create-button">
        <mat-icon>add</mat-icon>
        Create New Concept
      </button>
    </div>
  </div>

  <!-- Filters Section -->
  <mat-card class="filters-card">
    <div class="filters-container">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search concepts</mat-label>
        <input matInput 
               [(ngModel)]="searchQuery" 
               (ngModelChange)="onSearchChange()"
               placeholder="Search by title, description, or tags...">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline" class="status-filter">
        <mat-label>Status</mat-label>
        <mat-select [(ngModel)]="statusFilter" (ngModelChange)="onStatusFilterChange()">
          <mat-option *ngFor="let option of statusOptions" [value]="option.value">
            {{ option.label }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </mat-card>

  <!-- Concepts List -->
  <mat-card class="concepts-card">
    <div class="table-container" *ngIf="filteredConcepts$ | async as concepts">
      <!-- Data Table -->
      <table mat-table [dataSource]="concepts" class="concepts-table" *ngIf="concepts.length > 0">
        
        <!-- Title Column -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef>Concept</th>
          <td mat-cell *matCellDef="let concept" class="title-cell">
            <div class="concept-info">
              <h3 class="concept-title">{{ concept.title }}</h3>
              <p class="concept-description">{{ concept.description | slice:0:80 }}...</p>
            </div>
          </td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let concept" class="status-cell">
            <div class="status-badge" [ngClass]="getStatusClass(concept.status)">
              <mat-icon [color]="getStatusColor(concept.status)">{{ getStatusIcon(concept.status) }}</mat-icon>
              <span>{{ concept.status.replace('_', ' ') }}</span>
            </div>
          </td>
        </ng-container>

        <!-- Updated Column -->
        <ng-container matColumnDef="updatedAt">
          <th mat-header-cell *matHeaderCellDef>Last Updated</th>
          <td mat-cell *matCellDef="let concept" class="date-cell">
            {{ concept.updatedAt | date:'MMM d, y' }}
          </td>
        </ng-container>

        <!-- Tags Column -->
        <ng-container matColumnDef="tags">
          <th mat-header-cell *matHeaderCellDef>Tags</th>
          <td mat-cell *matCellDef="let concept" class="tags-cell">
            <mat-chip-listbox class="concept-tags">
              <mat-chip *ngFor="let tag of concept.tags.slice(0, 2)">
                {{ tag }}
              </mat-chip>
              <span *ngIf="concept.tags.length > 2" class="more-tags">
                +{{ concept.tags.length - 2 }} more
              </span>
            </mat-chip-listbox>
          </td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let concept" class="actions-cell">
            <button mat-icon-button 
                    color="primary"
                    (click)="viewConcept(concept.id)"
                    matTooltip="View Concept">
              <mat-icon>visibility</mat-icon>
            </button>
            <button mat-icon-button 
                    color="accent"
                    (click)="editConcept(concept.id)"
                    matTooltip="Edit Concept">
              <mat-icon>edit</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" 
            class="concept-row"
            (click)="viewConcept(row.id)"></tr>
      </table>

      <!-- Empty State -->
      <div *ngIf="concepts.length === 0" class="empty-state">
        <mat-icon class="empty-icon">event_note</mat-icon>
        <h3>No concepts found</h3>
        <p *ngIf="searchQuery || statusFilter !== 'ALL'">
          Try adjusting your search or filters
        </p>
        <p *ngIf="!searchQuery && statusFilter === 'ALL'">
          Create your first event concept to get started
        </p>
        <button mat-raised-button color="primary" (click)="createConcept()">
          <mat-icon>add</mat-icon>
          Create Your First Concept
        </button>
      </div>
    </div>
  </mat-card>
</div> 